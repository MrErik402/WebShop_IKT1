<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Társas estek</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

	
    <link rel="stylesheet" href="./Styles/output2.css">

    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>

    
</head>

<body class="bg-tarsas1-light dark:bg-tarsas4-dark flex flex-col min-h-screen relative">   
    <!-- Ide kerul a navbar a ../Components/Navbar.js ből-->
    <div id="tartalom" class="px-8 py-16">
        <div id="reklamElemek" class="flex flex-wrap gap-4 lg:gap-0 justify-between">
            <div id="fedoNevek" class="flex w-[100%] lg:w-[30%] bg-[#c0093b] rounded-lg p-4">
                <img src="../Pictures/Fooldal/fedonevek_fooldal.png" alt="" class="w-1/4 lg:w-1/2 self-center">
                <div class="flex-col w-1/2 justify-center items-center pl-4">
                    <h1 class="font-bold text-4xl md:text-6xl lg:text-4xl text-white">FEDŐ NEVEK</h1>
                    <p class="font-bold text-white mt-2">A szókincset és a kreativitást fejlesztő társasjáték</p>
                </div>
            </div>
            <div id="unoMercy" class="flex w-[100%] lg:w-[35%] bg-[#0065c9] rounded-lg p-4">
                <img src="../Pictures/Fooldal/uno.png" alt="" class="w-1/4 lg:w-1/2 self-center">
                <div class="flex-col w-1/2 justify-center items-center pl-4">
                    <h1 class="font-bold text-4xl md:text-6xl lg:text-4xl text-white">UNO NO MERCY</h1>
                    <p class="font-bold text-white mt-2">A szókincset és a kreativitást fejlesztő társasjáték</p>
                </div>
            </div>
            <div id="mimiCica" class="flex w-[100%] lg:w-[32%] bg-[#c0093b] rounded-lg p-4">
                <img src="../Pictures/Fooldal/mimicica.png" alt="" class="w-1/4 lg:w-1/2 self-center">
                <div class="flex-col w-1/2 justify-center items-center pl-4">
                    <h1 class="font-bold text-4xl md:text-6xl lg:text-4xl text-white">SÉTÁLÓ MIMI CICA</h1>
                    <p class="font-bold text-white mt-2">A szókincset és a kreativitást fejlesztő társasjáték</p>
                </div>
            </div>
        </div>
        <div id="kategoriaKartyak" class="flex flex-wrap justify-between gap-1 mt-16 text-lg sm:gap-5">
            <div class="flex flex-col-reverse w-[45%] lg:w-[20%] rounded-lg bg-[url('../Pictures/Fooldal/kinevet.png')] bg-center bg-no-repeat h-[170px] ">
                <a href="./tarsasJatek.html" class="flex justify-center w-3/4 bg-white bg-opacity-90 h-1/3 self-center m-4 rounded-3xl border-solid border border-black">
                    <p class="self-center">Társasjátékok</p>
                </a>
            </div>
            <div class="flex flex-col-reverse w-[45%] lg:w-[20%] rounded-lg bg-[url('../Pictures/Fooldal/pcb.png')] bg-center bg-no-repeat h-[170px] ">
                <a href="elektronikus.html" class="flex justify-center w-3/4 bg-white bg-opacity-90 h-1/3 self-center m-4 rounded-3xl border-solid border border-black">
                    <p class="self-center">Elektronikus</p>
                </a>
            </div>
            <div class="flex flex-col-reverse w-[45%] lg:w-[20%] rounded-lg bg-[url('../Pictures/Fooldal/katonak.png')] bg-center bg-no-repeat h-[170px] ">
                <a href="muanyag.html" class="flex justify-center w-3/4 bg-white bg-opacity-90 h-1/3 self-center m-4 rounded-3xl border-solid border border-black">
                    <p class="self-center">Műanyag</p>
                </a>
            </div>
            <div class="flex flex-col-reverse w-[45%] lg:w-[20%] rounded-lg bg-[url('../Pictures/Fooldal/fegyok.png')] bg-center bg-no-repeat h-[170px] ">
                <a href="./airsoftFegyver.html" class="flex justify-center w-3/4 bg-white bg-opacity-90 h-1/3 self-center m-4 rounded-3xl border-solid border border-black">
                    <p class="self-center">Airsoft</p>
                </a>
            </div>
        </div>
    </div>
    <div class="popUp hidden  fixed top-0 right-0 w-60 bg-[#D5B4B4]  z-50 h-screen overflow-y-hidden">
        <div onClick="closePopUp()" class=" text-center hover:cursor-pointer  max-w-10 h-6 p-1 relative left-0">
            <img src="../Pictures/x-Kosar.png" />
        </div>
        <div class="innerContent  overflow-y-scroll h-full w-full px-4 pt-2 pb-8">
                <div class="flex flex-col items-center mx-auto">
                    <img class="w-20" src="../../Pictures/popupshoppingcart.png" alt="">
                    <h1 class="pt-2">Összesen</h1>
                    <h1 class="pt-1 pb-4 font-bold" id="finalPrice">0$</h1>
                    <button onClick="closePopUp()" class="fizetes ring-1 max-w-screen-lg w-full ring-gray-400 p-1 bg-[#867070] text-white rounded-md">
                        Fizetés
                    </button>
                    <div class="kosarbanLevoTermekek mt-5 flex flex-col gap-2">
                        
                    </div>
                </div>
        </div>
      </div>
    <div class="footer"></div>
    <script src="./Javascript/Products/Products.js"></script>
    <script src="./Javascript/Cart/Cart.js"></script>
    <script src="../Components/Navbar.js"></script>
    <script src="../Components/Footer.js"></script>
    <script>
        updateCartNumber();
        window.popUp = function() {
            document.querySelector(".kosarbanLevoTermekek").innerHTML = ``;
            document.querySelector(".popUp").classList.remove("hidden");
    
            let sum = 0;
    
            if (cart.length == 0) {
                document.querySelector("#finalPrice").textContent = 0 + " Ft";
            }
    
            cart.forEach(value => {
                let id = value.id;
                let quantity = Number(value.quantity);
                let image = value.img;
                let ar = Number(value.ar);
                let formattedAr = new Intl.NumberFormat('hu-HU', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(ar).replace(/\s/g, '\u00A0');
                let nev = value.nev;
    
                sum += ar * quantity;
    
                document.querySelector("#finalPrice").textContent = new Intl.NumberFormat('hu-HU', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(sum).replace(/\s/g, '\u00A0') + " Ft";
    
                document.querySelector(".kosarbanLevoTermekek").innerHTML += `
                    <div class="ring-1 ring-black/30">
                        <div class="flex flex-col item-container" data-id="${id}">
                            <img class="p-2 min-w-24 w-full max-w-24 h-full max-h-24 min-h-24 self-center" src="${image}" alt="">
                            <h1 class="pt-2 px-1 font-thin">${nev}</h1>
                            <div class="flex gap-2 justify-between px-1 pb-2">
                                <h1 class="text-right float-right font-medium">${formattedAr} Ft</h1>
                                <input onChange="inputChange(${id}, Number(this.value))" min="0" type="number" value="${quantity}" class="w-8 bg-white/50" />
                            </div>
                            <button class="hover:ring-1 ring-black/20 remove-item p-1 m-1 rounded-lg text-white bg-[#867070]">Eltávolítás</button>
                        </div>
                    </div>
                `;
            });
    
            // "x" gomb event listener
            document.querySelectorAll(".remove-item").forEach(btn => {
                btn.addEventListener("click", (e) => {
                    const id = parseInt(e.target.closest(".item-container").getAttribute("data-id"));
                    console.log(id);
                    if (confirm("⚠FIGYELEM RENDSZERÜZENET⚠\n\nEltávolítsuk ezt a tárgyat a kosaradból?")) {
                        removeThisItem(id, cart);
                    }
                });
            });
        };
    window.removeThisItem = function (id) {
        if (id) {
            const index = cart.findIndex(item => item.id === id);
            cart.splice(index, 1); // Item törlése a kosárból
            saveTheCart();
            updateCartNumber();
            popUp();
            getCartItems();
        }
    }   
    window.closePopUp = function(fizetes = false){
        document.querySelector(".kosarbanLevoTermekek").innerHTML = ``;
        document.querySelector(".popUp").classList.add("hidden");
        if (fizetes) {
            window.location.href = "./fizetes.html";
        }
    }
    
    window.inputChange = function (id, num){
    
        if(num < 0){
            num = 1;
        }
        else if(num == 0){
            if(confirm("⚠FIGYELEM RENDSZERÜZENET⚠\n\nBiztosan törölni szeretnéd a terméket a kosaradból?")){
                removeThisItem(id);
            }
            else{
                num = 1;
            }
        }
    
        const index = cart.findIndex(product => product.id === id)
        cart[index].quantity = num
        saveTheCart();
        updateCartNumber();
        popUp();
        getCartItems();
    }
    
    
        </script>
</body>

</html>
